const express = require('express');
const articleController = require('../controllers/articleController');
const articleRouter = express.Router();
const passport = require('../config/jwtConfig'); // chá»©a verifyUser

// Middleware xá»­ lÃ½ dá»¯ liá»‡u Ä‘áº§u vÃ o
articleRouter.use(express.json());
articleRouter.use(express.urlencoded({ extended: true }));

// ðŸ“„ Route chÃ­nh: /articles
articleRouter.route('/')
  .get(passport.verifyUser, articleController.findAll)
  .post(passport.verifyUser, articleController.create)
  .put((req, res) => {
    res.status(403).json('PUT operation not supported on /articles');
  })
  .delete(articleController.delete);

// ðŸ“„ Route vá»›i ID: /articles/:id
articleRouter.route('/:id')
  .get(articleController.findById)
  .post(passport.verifyUser, (req, res) => {
    res.status(403).end('POST operation not supported on /articles/' + req.params.id);
  })
  .put(articleController.update)
  .delete(passport.verifyUser, articleController.delete);

module.exports = articleRouter;
